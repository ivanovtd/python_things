# Авторизация на web'ах по имени аккаунта/домену

Для работы потребуется:
  - Python3
  - requests

# !Особености:

1. В основном получает информацию с API, но в случае с id серверов я решил, что подсасывать 5(!!!) мегабайт информации это уже слишком, поэтому один раз сделал табличку и все. Если id серверов в билинге будут меняться слишком часто, то можно переключиться на API, инструкция в файле есть
2. Умеет искать по доменам, или аккаунту, нужно запускать с соответствующим флагом
3. Есть "Тихий режим", в котором подключения к серваку не происходит, но информация выводится, я использую для просмотра списка email'ов. Также есть ссылка на билинг
4. Сразу делает cd в директорию пользователя.

# Установка зависимостей:

```sh
$ python3 -m pip install requests
```

# Добавляем переменные окружения:
Для этого добавляем в ваш .bashrc/.zshrc/.fishrc следующие 3 строчки:
```sh
export MJ_BILLING_LOGIN="Ваш логин в билинге"
export MJ_BILLING_PASSWD="Ваш пароль в билинге"
export MJ_WEB_ROOT="Пароль от сапа"
#Для удобства можно сразу добавить алиас
alias webssh='python3 /Users/ivanovtd/scripts/python/hms_auth/hms_auth.py'
```

В .ssh/config должна быть похожая конструкция:
```sh
Host web*
	User sup
        Port 1022
        IdentityFile /path/to/identity_file
```

# Запускаем!

После установки всех зависимостей мы можем запустить скрипт, используя следующую команду:
```sh
$ webssh AC_224436
```
Или
```sh
$ webssh ivanovtd.ru
```
"Тихий режим"
```sh
$ webssh ivanovtd.ru -q
```
# Обращаю ваше внимание, что скрипт больше писался для себя, и если есть конструктивные улучшательства, то обращайтесь.
